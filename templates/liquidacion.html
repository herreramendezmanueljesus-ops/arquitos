{% extends 'base.html' %}
{% block content %}
<h1 class="h3 mb-3">Liquidación</h1>

<form method="POST" class="row g-3 mb-3">
  <div class="col-md-4">
    <label class="form-label">Fecha inicio</label>
    <input type="date" name="start_date" class="form-control" value="{{ request.form.get('start_date','') }}">
  </div>
  <div class="col-md-4">
    <label class="form-label">Fecha fin</label>
    <input type="date" name="end_date" class="form-control" value="{{ request.form.get('end_date','') }}">
  </div>
  <div class="col-md-4 d-flex align-items-end">
    <button class="btn btn-primary w-100">Filtrar</button>
  </div>
</form>

<h5>Total Abonos: {{ '%.2f'|format(total_abonos) }}</h5>
<h5>Total Préstamos: {{ '%.2f'|format(total_prestamos) }}</h5>

<table class="table table-bordered table-striped mt-3">
  <thead>
    <tr>
      <th>#</th>
      <th>Cliente ID</th>
      <th>Tipo</th>
      <th>Monto</th>
      <th>Fecha/Hora</th>
    </tr>
  </thead>
  <tbody>
    {% for t in txs %}
    <tr>
      <td>{{ t.id }}</td>
      <td>{{ t.client_id }}</td>
      <td>{{ t.type }}</td>
      <td>{{ '%.2f'|format(t.amount) }}</td>
      <td>{{ t.created_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
