{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>Detalle de Préstamos - {{ fecha.strftime("%d/%m/%Y") }}</h2>

  {% if prestamos %}
  <table class="table table-bordered table-hover mt-3">
    <thead class="table-dark">
      <tr>
        <th>Cliente</th>
        <th>Monto</th>
        <th>Fecha/Hora</th> <!-- Nueva columna -->
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for prestamo in prestamos %}
      <tr>
        <td>{{ prestamo.cliente.nombre }}</td>
        <td>{{ "%.2f"|format(prestamo.monto) }}</td>
        <td>{{ prestamo.fecha.strftime("%d/%m/%Y %H:%M:%S") }}</td> <!-- fecha/hora -->
        <td>
          <form action="{{ url_for('eliminar_prestamo', prestamo_id=prestamo.id) }}" 
                method="POST" 
                style="display:inline;"
                onsubmit="return confirm('¿Seguro que deseas eliminar este préstamo?')">
            <button type="submit" class="btn btn-danger btn-sm">❌ Eliminar</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-warning mt-3">No hubo préstamos en esta fecha.</div>
  {% endif %}

  <a href="{{ url_for('liquidacion') }}" class="btn btn-secondary mt-3">⬅ Volver</a>
</div>

<!-- CSS para inputs numéricos sin flechitas -->
<style>
  input[type=number]::-webkit-inner-spin-button,
  input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  input[type=number] {
    -moz-appearance: textfield;
  }
</style>
{% endblock %}
