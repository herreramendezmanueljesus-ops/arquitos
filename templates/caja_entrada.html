@app.route("/caja/entrada", methods=["POST"])
@login_required
def caja_entrada():
    try:
        monto = float(request.form.get("monto", 0))
    except ValueError:
        flash("Monto invÃ¡lido", "warning")
        return redirect(url_for("liquidacion"))

    descripcion = request.form.get("descripcion", "Entrada").strip()
    mov = MovimientoCaja(tipo="entrada", monto=monto, descripcion=descripcion, fecha=date.today())
    db.session.add(mov)
    db.session.commit()

    actualizar_liquidacion_por_movimiento(date.today())
    flash("Entrada registrada en caja ðŸ’°", "success")
    return redirect(url_for("liquidacion"))
