{% extends "base.html" %}
{% block title %}ğŸš« Clientes Cancelados{% endblock %}

{% block content %}
<div class="container mt-4">
  <!-- ğŸ§­ Encabezado -->
  <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4">
    <h2 class="m-0">ğŸš« Clientes Cancelados</h2>
    <a href="{{ url_for('rutas.index') }}" class="btn btn-outline-secondary btn-sm">â¬…ï¸ Volver al Listado</a>
  </div>

  {% if clientes %}
  <!-- ğŸ“‹ Tabla de clientes cancelados -->
  <table class="table table-bordered table-hover align-middle text-center shadow-sm">
    <thead class="table-dark">
      <tr>
        <th>ğŸ“„ CÃ³digo</th>
        <th>ğŸ‘¤ Nombre</th>
        <th>ğŸ“ DirecciÃ³n</th>
        <th>ğŸ“ TelÃ©fono</th>
        <th>ğŸ“… Fecha CreaciÃ³n</th>
        <th>ğŸ’° Saldo Total</th>
        <th>â™»ï¸ Reactivar</th>
      </tr>
    </thead>
    <tbody>
      {% for c in clientes %}
      <tr>
        <td>{{ c.codigo }}</td>
        <td>{{ c.nombre }}</td>
        <td>{{ c.direccion or "â€”" }}</td>
        <td>{{ c.telefono or "â€”" }}</td>
        <td>{{ c.fecha_creacion.strftime("%d/%m/%Y") }}</td>
        <td class="fw-bold text-danger">
          ${{ "%.2f"|format(c.saldo_total()) }}
        </td>
        <td>
          <form action="{{ url_for('rutas.reactivar_cliente', cliente_id=c.id) }}" method="post"
                onsubmit="return confirm('Â¿Deseas reactivar este cliente?');">
            <button type="submit" class="btn btn-success btn-sm">ğŸ”„ Reactivar</button>
          </form>
        </td>
      </tr>
      {% endfor %}
      <tr class="table-light">
        <td colspan="5" class="fw-bold text-end">ğŸ“Š Totales:</td>
        <td class="fw-bold text-danger">
          ${{ "%.2f"|format(total_saldos or 0) }}
        </td>
        <td class="fw-bold text-secondary">
          {{ total_cancelados }} clientes
        </td>
      </tr>
    </tbody>
  </table>

  <!-- ğŸ•’ Hora actual -->
  <div class="text-end text-muted mt-3">
    ğŸ•’ Hora actual: {{ hora_actual() }}
  </div>

  {% else %}
  <!-- ğŸš« Sin registros -->
  <div class="alert alert-info text-center shadow-sm">
    âš ï¸ No hay clientes cancelados actualmente.
  </div>
  {% endif %}
</div>

<!-- ğŸ¨ Estilos adicionales -->
<style>
  .table td, .table th {
    vertical-align: middle;
  }
  .btn-outline-secondary {
    border-radius: 8px;
  }
  .shadow-sm {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .fw-bold.text-danger {
    color: #dc3545 !important;
  }
</style>
{% endblock %}
